# エラー処理とロギング

## 実装方針

### エラー処理
- Laravelの標準エラーハンドラをカスタマイズ
- カスタム例外クラスの階層設計
- 開発環境と本番環境でのエラー表示の切り分け
- SweetAlert2を使用したフラッシュメッセージ

### ロギング
- 開発環境: ファイルログ（詳細レベル）
- 本番環境: ファイルログ + 重要エラーはSlack通知
- ログローテーション: 日次、14日間保持

### 監査ログ
- `spatie/laravel-activitylog`パッケージを利用
- 記録対象: 重要アクション（作成/編集/削除）に限定
- 保存期間: 3ヶ月自動削除
- パフォーマンス対策: 非同期処理やキューの活用

## ログレベルの使い分け
- **emergency/alert**: システム停止級のエラー
- **critical/error**: 運用影響あるエラー
- **warning**: 将来的に問題になる可能性
- **notice/info**: 運用監視情報
- **debug**: 開発時のみ必要な情報

## 監査ログの内容

**記録対象のアクション例**:
- TODO作成時のログ
- TODO編集時のログ（変更前後の値）
- TODO削除時のログ
- TODO完了/未完了の状態変更
- カテゴリ/タグの操作

**記録する情報**:
- 操作したユーザーのID
- 操作日時
- 操作種別（作成/編集/削除など）
- 操作対象（ID、種別）
- 変更前後の値（編集の場合） 